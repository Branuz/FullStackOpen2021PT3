(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{38:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(15),s=n.n(c),r=n(6),u=n(3),a=n(2),i=n(4),o=n.n(i),d="/api/persons/",j=function(e){return o.a.post(d,e).then((function(e){return e.data}))},l=function(e,t){return o.a.put(d+e,t).then((function(e){return e.data}))},b=function(e){return o.a.delete(d+e).then((function(e){return e.data}))},f=(n(38),n(0)),h=function(e){return Object(f.jsxs)("form",{id:"myForm",onSubmit:e.addName,children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{onChange:function(t){return e.setNewName(t.target.value)}})]}),Object(f.jsxs)("div",{children:["phone: ",Object(f.jsx)("input",{onChange:function(t){return e.setNewPhone(t.target.value)}})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",onClick:function(){return document.getElementById("myForm").reset()},children:"add"})})]},e.avain)},m=function(e){return Object(f.jsxs)("div",{children:["filter show with",Object(f.jsx)("input",{onChange:function(t){e.setSearch(t.target.value),e.setStatus(!1)}})]})},O=function(e){return(e.searchStatus?e.persons:e.persons.filter((function(t){return t.name.includes(e.newSearch)}))).map((function(t){return Object(f.jsxs)("p",{children:[" ",t.name," ",t.number," ",Object(f.jsx)("button",{onClick:function(){window.confirm("Delete "+t.name)&&(console.log(t.name+" deleted"),b(t.id).then((function(n){e.setPersons(e.persons.filter((function(e){return e.id!==t.id})))})),e.setSuccessMessage("Deleted "+t.name),setTimeout((function(){e.setSuccessMessage(null)}),5e3))},children:"delete"})]},t.id)}))},p=function(e){var t=e.message;return null===t?null:Object(f.jsx)("div",{className:"success",children:t})},x=function(e){var t=e.message;return null===t?null:Object(f.jsx)("div",{className:"error",children:t})},v=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(""),i=Object(u.a)(s,2),d=i[0],b=i[1],v=Object(a.useState)(""),g=Object(u.a)(v,2),w=g[0],S=g[1],N=Object(a.useState)(""),y=Object(u.a)(N,2),k=y[0],C=y[1],P=Object(a.useState)(!0),T=Object(u.a)(P,2),D=T[0],E=T[1],M=Object(a.useState)(null),B=Object(u.a)(M,2),F=B[0],I=B[1],J=Object(a.useState)(null),A=Object(u.a)(J,2),q=A[0],z=A[1];Object(a.useEffect)((function(){o.a.get("/api/persons/").then((function(e){c(e.data)}))}),[]);return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(p,{message:F}),Object(f.jsx)(x,{message:q}),Object(f.jsx)(m,{setSearch:C,setStatus:E}),Object(f.jsx)("h2",{children:"add a new"}),Object(f.jsx)(h,{setNewName:b,setNewPhone:S,addName:function(e){e.preventDefault();var t={name:d,number:w,id:n.length+1},s=n.filter((function(e){return e.name===d}));if(1===s.length){var u=n.find((function(e){return e.id===s[0].id})),a=Object(r.a)(Object(r.a)({},u),{},{number:w});if(window.confirm("".concat(d," is already added to phonebook, replace the old number with a new one?"))){l(s[0].id,a).then((function(e){c(n.map((function(t){return t.id!==s[0].id?t:e})))})).catch((function(e){return z(s[0].name+" was already removed from server"),setTimeout((function(){z(null)}),5e3),e})).then((function(e){void 0===[e][0]&&(I("Number changed for "+s[0].name),setTimeout((function(){I(null)}),5e3))}))}}else j(t).then((function(e){c(n.concat(e)),b("")})),I(Object(f.jsxs)("div",{children:["Added ",t.name]})),setTimeout((function(){I(null)}),5e3)},avain:n.length+1}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(O,{searchStatus:D,persons:n,newSearch:k,setPersons:c,setNewName:b,setSuccessMessage:I})]})};s.a.render(Object(f.jsx)(v,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.bb43467b.chunk.js.map