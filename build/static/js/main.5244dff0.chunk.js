(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{38:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(15),s=n.n(c),r=n(6),a=n(3),u=n(2),i=n(4),o=n.n(i),d="http://localhost:3001/api/persons/",l=function(e){return o.a.post(d,e).then((function(e){return e.data}))},j=function(e,t){return o.a.put(d+e,t).then((function(e){return e.data}))},h=function(e){return o.a.delete(d+e).then((function(e){return e.data}))},b=(n(38),n(0)),f=function(e){return Object(b.jsxs)("form",{id:"myForm",onSubmit:e.addName,children:[Object(b.jsxs)("div",{children:["name: ",Object(b.jsx)("input",{onChange:function(t){return e.setNewName(t.target.value)}})]}),Object(b.jsxs)("div",{children:["phone: ",Object(b.jsx)("input",{onChange:function(t){return e.setNewPhone(t.target.value)}})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",onClick:function(){return document.getElementById("myForm").reset()},children:"add"})})]},e.avain)},m=function(e){return Object(b.jsxs)("div",{children:["filter show with",Object(b.jsx)("input",{onChange:function(t){e.setSearch(t.target.value),e.setStatus(!1)}})]})},O=function(e){return(e.searchStatus?e.persons:e.persons.filter((function(t){return t.name.includes(e.newSearch)}))).map((function(t){return Object(b.jsxs)("p",{children:[" ",t.name," ",t.number," ",Object(b.jsx)("button",{onClick:function(){window.confirm("Delete "+t.name)&&(console.log(t.name+" deleted"),h(t.id).then((function(n){e.setPersons(e.persons.filter((function(e){return e.id!==t.id})))})),e.setSuccessMessage("Deleted "+t.name),setTimeout((function(){e.setSuccessMessage(null)}),5e3))},children:"delete"})]},t.id)}))},p=function(e){var t=e.message;return null===t?null:Object(b.jsx)("div",{className:"success",children:t})},x=function(e){var t=e.message;return null===t?null:Object(b.jsx)("div",{className:"error",children:t})},v=function(){var e=Object(u.useState)([]),t=Object(a.a)(e,2),n=t[0],c=t[1],s=Object(u.useState)(""),i=Object(a.a)(s,2),d=i[0],h=i[1],v=Object(u.useState)(""),g=Object(a.a)(v,2),w=g[0],S=g[1],N=Object(u.useState)(""),y=Object(a.a)(N,2),k=y[0],C=y[1],P=Object(u.useState)(!0),T=Object(a.a)(P,2),D=T[0],E=T[1],M=Object(u.useState)(null),B=Object(a.a)(M,2),F=B[0],I=B[1],J=Object(u.useState)(null),A=Object(a.a)(J,2),q=A[0],z=A[1];Object(u.useEffect)((function(){o.a.get("http://localhost:3001/api/persons/").then((function(e){c(e.data)}))}),[]);return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(p,{message:F}),Object(b.jsx)(x,{message:q}),Object(b.jsx)(m,{setSearch:C,setStatus:E}),Object(b.jsx)("h2",{children:"add a new"}),Object(b.jsx)(f,{setNewName:h,setNewPhone:S,addName:function(e){e.preventDefault();var t={name:d,number:w,id:n.length+1},s=n.filter((function(e){return e.name===d}));if(1===s.length){var a=n.find((function(e){return e.id===s[0].id})),u=Object(r.a)(Object(r.a)({},a),{},{number:w});if(window.confirm("".concat(d," is already added to phonebook, replace the old number with a new one?"))){j(s[0].id,u).then((function(e){c(n.map((function(t){return t.id!==s[0].id?t:e})))})).catch((function(e){return z(s[0].name+" was already removed from server"),setTimeout((function(){z(null)}),5e3),e})).then((function(e){void 0===[e][0]&&(I("Number changed for "+s[0].name),setTimeout((function(){I(null)}),5e3))}))}}else l(t).then((function(e){c(n.concat(e)),h("")})),I(Object(b.jsxs)("div",{children:["Added ",t.name]})),setTimeout((function(){I(null)}),5e3)},avain:n.length+1}),Object(b.jsx)("h2",{children:"Numbers"}),Object(b.jsx)(O,{searchStatus:D,persons:n,newSearch:k,setPersons:c,setNewName:h,setSuccessMessage:I})]})};s.a.render(Object(b.jsx)(v,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.5244dff0.chunk.js.map